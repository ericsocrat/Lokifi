
> lokifi-frontend@0.1.0 test
> vitest --coverage --run


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/Users/USER/Desktop/lokifi/apps/frontend[39m
      [2mCoverage enabled with [22m[33mv8[39m

stderr | tests/api/contracts/websocket.contract.test.ts > WebSocket API Contract > Connection > establishes WebSocket connection
[MSW] Warning: intercepted a request without a matching request handler:

  Î“Ã‡Ã³ GET ws://localhost:8000/ws

If you still wish to intercept this unhandled request, please create a request handler for it.
Read more: https://mswjs.io/docs/http/intercepting-requests

stderr | tests/api/contracts/websocket.contract.test.ts > WebSocket API Contract > Connection > receives real-time price updates
Unhandled GET request to http://localhost:8000/ws

[90mstdout[2m | tests/api/contracts/websocket.contract.test.ts[2m > [22m[2mWebSocket API Contract[2m > [22m[2mConnection[2m > [22m[2mreceives real-time price updates
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  WebSocket not available, skipping test

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mregister[2m > [22m[2mregisters a new user successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/register
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mregister[2m > [22m[2mregisters a new user successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mregister[2m > [22m[2mregisters user without optional username
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/register
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mmakes GET request successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/test
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mregister[2m > [22m[2mregisters user without optional username
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2mstarts with loading state
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mregister[2m > [22m[2mhandles registration error when email exists
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/register
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mmakes GET request successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mregister[2m > [22m[2mhandles registration error when email exists
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m400[39m

stderr | tests/lib/api/auth.test.ts > Auth API Functions > register > handles registration error when email exists
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Email already registered"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.register (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:9:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:81:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mregister[2m > [22m[2mhandles registration error when email exists
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Email already registered"}

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mregister[2m > [22m[2mhandles validation errors
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/register
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mregister[2m > [22m[2mhandles validation errors
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m422[39m

stderr | tests/lib/api/auth.test.ts > Auth API Functions > register > handles validation errors
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":[{"loc":["body","email"],"msg":"Invalid email format","type":"value_error.email"}]}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.register (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:9:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:104:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mmakes POST request successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/test
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mregister[2m > [22m[2mhandles validation errors
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":[{"loc":["body","email"],"msg":"Invalid email format","type":"value_error.email"}]}

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mmakes POST request successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mmakes PUT request successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/test/123
â‰¡Æ’Ã®Ã‰ apiFetch: Method: PUT

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mmakes PUT request successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogin[2m > [22m[2mlogs in user successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/login
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogin[2m > [22m[2mlogs in user successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mmakes DELETE request successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/test/123
â‰¡Æ’Ã®Ã‰ apiFetch: Method: DELETE

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mmakes DELETE request successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m204[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogin[2m > [22m[2mhandles invalid credentials
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/login
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogin[2m > [22m[2mhandles invalid credentials
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m401[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mincludes credentials for cookie handling
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/test
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

stderr | tests/lib/api/auth.test.ts > Auth API Functions > login > handles invalid credentials
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Invalid credentials"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.login (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:19:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:137:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogin[2m > [22m[2mhandles invalid credentials
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Invalid credentials"}

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mincludes credentials for cookie handling
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogin[2m > [22m[2mhandles account locked error
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/login
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogin[2m > [22m[2mhandles account locked error
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m403[39m
stderr | tests/lib/api/auth.test.ts > Auth API Functions > login > handles account locked error
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Account locked due to too many failed attempts"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.login (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:19:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:150:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20


[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2msets Content-Type header
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/test
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogin[2m > [22m[2mhandles account locked error
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Account locked due to too many failed attempts"}

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2msets Content-Type header
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogin[2m > [22m[2mhandles network errors
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/login
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2mfetches user data on mount if authenticated
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mpreserves custom Content-Type header
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/test
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mpreserves custom Content-Type header
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mpreserves other custom headers
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/test
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mSuccessful Requests[2m > [22m[2mpreserves other custom headers
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

stderr | tests/lib/api/auth.test.ts > Auth API Functions > login > handles network errors
Î“Â¥Ã® apiFetch: Request failed: TypeError: Failed to fetch
    at createNetworkError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/utils/createNetworkError.ts:2:24)
    at Object.onRequestError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:139:34)
    at handleResponse (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:58:15)
    at handleRequest (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:230:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at globalThis.fetch (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:72:32)
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:27:17)
    at Module.login (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:19:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:160:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  cause: Response {
    status: 0,
    statusText: '',
    headers: Headers {},
    body: null,
    bodyUsed: false,
    ok: false,
    redirected: false,
    type: 'error',
    url: ''
  }
}

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > initialization > fetches user data on mount if authenticated
Unhandled GET request to http://localhost:8000/api/auth/me

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mauthenticates with Google successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/google
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mthrows error for 404 response
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/not-found
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mauthenticates with Google successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2mfetches user data on mount if authenticated
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m
â‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m404[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mthrows error for 404 response
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m404[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mhandles invalid Google token
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/google
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2mfetches user data on mount if authenticated
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Not Found"}
Î“Â£Ã  AuthProvider: User data received: test@example.com

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > initialization > fetches user data on mount if authenticated
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Not Found"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:40:24

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2mfetches user data on mount if authenticated
[22m[39mÎ“Â¥Ã® AuthProvider: Failed to get user data: Error: {"detail":"Not Found"}
    at apiFetch [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\apiFetch.ts:45:15[90m)[39m
[90m    at processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
    at me [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\auth.ts:44:15[90m)[39m
    at [90mC:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\components\AuthProvider.tsx:40:24

stderr | tests/lib/api/apiFetch.test.ts > apiFetch > Error Handling > throws error for 404 response
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Resource not found"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiFetch.test.ts:185:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mthrows error for 404 response
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Resource not found"}

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mhandles invalid Google token
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m401[39m

stderr | tests/lib/api/auth.test.ts > Auth API Functions > googleAuth > handles invalid Google token
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Invalid Google access token"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.googleAuth (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:29:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:194:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mhandles invalid Google token
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Invalid Google access token"}

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mhandles expired Google token
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/google
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mhandles expired Google token
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m401[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mthrows error for 500 response
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/error
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mthrows error for 500 response
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m500[39m

stderr | tests/lib/api/auth.test.ts > Auth API Functions > googleAuth > handles expired Google token
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Google token expired"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.googleAuth (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:29:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:204:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mhandles expired Google token
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Google token expired"}

stderr | tests/lib/api/apiFetch.test.ts > apiFetch > Error Handling > throws error for 500 response
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Internal server error"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiFetch.test.ts:195:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mthrows error for 500 response
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Internal server error"}

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles error response with plain text
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/error
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mhandles Google API errors
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/google
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mhandles Google API errors
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m500[39m

stderr | tests/lib/api/auth.test.ts > Auth API Functions > googleAuth > handles Google API errors
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Failed to verify Google token"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.googleAuth (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:29:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:214:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles error response with plain text
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m400[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mgoogleAuth[2m > [22m[2mhandles Google API errors
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Failed to verify Google token"}

stderr | tests/lib/api/apiFetch.test.ts > apiFetch > Error Handling > handles error response with plain text
Î“Â¥Ã® apiFetch: Request failed: Error: Plain text error
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiFetch.test.ts:205:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles error response with plain text
[22m[39mÎ“Â¥Ã® apiFetch: Error response: Plain text error

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogout[2m > [22m[2mlogs out user successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/logout
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles error response with invalid JSON
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/error
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogout[2m > [22m[2mlogs out user successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles error response with invalid JSON
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m400[39m

stderr | tests/lib/api/apiFetch.test.ts > apiFetch > Error Handling > handles error response with invalid JSON
Î“Â¥Ã® apiFetch: Request failed: Error: Invalid JSON{
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiFetch.test.ts:218:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles error response with invalid JSON
[22m[39mÎ“Â¥Ã® apiFetch: Error response: Invalid JSON{

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogout[2m > [22m[2mhandles logout when already logged out
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/logout
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogout[2m > [22m[2mhandles logout when already logged out
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m401[39m

stderr | tests/lib/api/auth.test.ts > Auth API Functions > logout > handles logout when already logged out
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"No active session"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.logout (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:40:3)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:237:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogout[2m > [22m[2mhandles logout when already logged out
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"No active session"}

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles error response with empty body
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/error
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles error response with empty body
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m500[39m

stderr | tests/lib/api/apiFetch.test.ts > apiFetch > Error Handling > handles error response with empty body
Î“Â¥Ã® apiFetch: Request failed: Error: Internal Server Error
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiFetch.test.ts:231:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles error response with empty body
[22m[39mÎ“Â¥Ã® apiFetch: Error response: 

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles 401 unauthorized
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/protected
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogout[2m > [22m[2mhandles server errors during logout
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/logout
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles 401 unauthorized
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m401[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogout[2m > [22m[2mhandles server errors during logout
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m500[39m

stderr | tests/lib/api/apiFetch.test.ts > apiFetch > Error Handling > handles 401 unauthorized
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Not authenticated"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiFetch.test.ts:241:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles 401 unauthorized
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Not authenticated"}

stderr | tests/lib/api/auth.test.ts > Auth API Functions > logout > handles server errors during logout
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Internal server error"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.logout (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:40:3)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:247:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mlogout[2m > [22m[2mhandles server errors during logout
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Internal server error"}

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2msets user to null if /me request fails
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET
stderr | tests/components/AuthProvider.test.tsx > AuthProvider > initialization > sets user to null if /me request fails
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Unauthorized"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:40:24


[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mme[2m > [22m[2mfetches current user successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2msets user to null if /me request fails
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m401[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2msets user to null if /me request fails
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Unauthorized"}

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2msets user to null if /me request fails
[22m[39mÎ“Â¥Ã® AuthProvider: Failed to get user data: Error: {"detail":"Unauthorized"}
    at apiFetch [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\apiFetch.ts:45:15[90m)[39m
    at me [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\auth.ts:44:15[90m)[39m
    at [90mC:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\components\AuthProvider.tsx:40:24

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles 403 forbidden
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/forbidden
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mme[2m > [22m[2mfetches current user successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles 403 forbidden
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m403[39m

stderr | tests/lib/api/apiFetch.test.ts > apiFetch > Error Handling > handles 403 forbidden
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Access denied"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiFetch.test.ts:251:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles 403 forbidden
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Access denied"}

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mme[2m > [22m[2mhandles unauthenticated request
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles 422 validation error
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/validate
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles 422 validation error
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m422[39m

stderr | tests/lib/api/apiFetch.test.ts > apiFetch > Error Handling > handles 422 validation error
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":[{"loc":["body","email"],"msg":"Invalid email format","type":"value_error.email"}]}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiFetch.test.ts:272:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles 422 validation error
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":[{"loc":["body","email"],"msg":"Invalid email format","type":"value_error.email"}]}

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mme[2m > [22m[2mhandles unauthenticated request
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m401[39m

stderr | tests/lib/api/auth.test.ts > Auth API Functions > me > handles unauthenticated request
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Not authenticated"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:281:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mme[2m > [22m[2mhandles unauthenticated request
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Not authenticated"}

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mme[2m > [22m[2mhandles expired session
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles network error
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/network-error
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mme[2m > [22m[2mhandles expired session
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m401[39m

stderr | tests/lib/api/auth.test.ts > Auth API Functions > me > handles expired session
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Session expired"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Module.me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:291:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mme[2m > [22m[2mhandles expired session
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Session expired"}

stderr | tests/lib/api/apiFetch.test.ts > apiFetch > Error Handling > handles network error
Î“Â¥Ã® apiFetch: Request failed: TypeError: Failed to fetch
    at createNetworkError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/utils/createNetworkError.ts:2:24)
    at Object.onRequestError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:139:34)
    at handleResponse (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:58:15)
    at handleRequest (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:230:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at globalThis.fetch (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:72:32)
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:27:17)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiFetch.test.ts:282:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  cause: Response {
    status: 0,
    statusText: '',
    headers: Headers {},
    body: null,
    bodyUsed: false,
    ok: false,
    redirected: false,
    type: 'error',
    url: ''
  }
}

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mme[2m > [22m[2mhandles server errors
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

stderr | tests/lib/api/auth.test.ts > Auth API Functions > me > handles server errors
Î“Â¥Ã® apiFetch: Request failed: TypeError: Failed to fetch
    at createNetworkError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/utils/createNetworkError.ts:2:24)
    at Object.onRequestError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:139:34)
    at handleResponse (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:58:15)
    at handleRequest (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:230:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at globalThis.fetch (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:72:32)
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:27:17)
    at Module.me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:301:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  cause: Response {
    status: 0,
    statusText: '',
    headers: Headers {},
    body: null,
    bodyUsed: false,
    ok: false,
    redirected: false,
    type: 'error',
    url: ''
  }
}

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mError Handling[2m > [22m[2mhandles timeout error
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/timeout
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mIntegration: Full Auth Flow[2m > [22m[2mcompletes full authentication flow
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/register
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mIntegration: Full Auth Flow[2m > [22m[2mcompletes full authentication flow
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mIntegration: Full Auth Flow[2m > [22m[2mcompletes full authentication flow
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/login
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mIntegration: Full Auth Flow[2m > [22m[2mcompletes full authentication flow
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mIntegration: Full Auth Flow[2m > [22m[2mcompletes full authentication flow
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mIntegration: Full Auth Flow[2m > [22m[2mcompletes full authentication flow
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mIntegration: Full Auth Flow[2m > [22m[2mcompletes full authentication flow
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/logout
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mIntegration: Full Auth Flow[2m > [22m[2mcompletes full authentication flow
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mError Handling Edge Cases[2m > [22m[2mhandles malformed JSON responses
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/login
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mError Handling Edge Cases[2m > [22m[2mhandles malformed JSON responses
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mError Handling Edge Cases[2m > [22m[2mhandles timeout errors
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/login
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2mhandles network errors gracefully
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > initialization > handles network errors gracefully
Î“Â¥Ã® apiFetch: Request failed: TypeError: Failed to fetch
    at createNetworkError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/utils/createNetworkError.ts:2:24)
    at Object.onRequestError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:139:34)
    at handleResponse (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:58:15)
    at handleRequest (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:230:12)
    at globalThis.fetch (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:72:32)
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:27:17)
    at me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:40:24 {
  cause: Response {
    status: 0,
    statusText: '',
    headers: Headers {},
    body: null,
    bodyUsed: false,
    ok: false,
    redirected: false,
    type: 'error',
    url: ''
  }
}

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2minitialization[2m > [22m[2mhandles network errors gracefully
[22m[39mÎ“Â¥Ã® AuthProvider: Failed to get user data: TypeError: Failed to fetch
    at createNetworkError [90m(file:///C:/Users/USER/Desktop/lokifi/apps/frontend/[39mnode_modules/[4m@mswjs/interceptors[24m/src/interceptors/fetch/utils/createNetworkError.ts:2:24[90m)[39m
    at Object.onRequestError [90m(file:///C:/Users/USER/Desktop/lokifi/apps/frontend/[39mnode_modules/[4m@mswjs/interceptors[24m/src/interceptors/fetch/index.ts:139:34[90m)[39m
    at handleResponse [90m(file:///C:/Users/USER/Desktop/lokifi/apps/frontend/[39mnode_modules/[4m@mswjs/interceptors[24m/src/utils/handleRequest.ts:58:15[90m)[39m
    at handleRequest [90m(file:///C:/Users/USER/Desktop/lokifi/apps/frontend/[39mnode_modules/[4m@mswjs/interceptors[24m/src/utils/handleRequest.ts:230:12[90m)[39m
    at globalThis.fetch [90m(file:///C:/Users/USER/Desktop/lokifi/apps/frontend/[39mnode_modules/[4m@mswjs/interceptors[24m/src/interceptors/fetch/index.ts:72:32[90m)[39m
    at apiFetch [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\apiFetch.ts:27:17[90m)[39m
    at me [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\auth.ts:44:15[90m)[39m
    at [90mC:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\components\AuthProvider.tsx:40:24 {
  cause: Response {
    status: [33m0[39m,
    statusText: [32m''[39m,
    headers: Headers {},
    body: [1mnull[22m,
    bodyUsed: [33mfalse[39m,
    ok: [33mfalse[39m,
    redirected: [33mfalse[39m,
    type: [32m'error'[39m,
    url: [32m''[39m
  }
}

stderr | tests/lib/api/apiFetch.test.ts > apiFetch > Error Handling > handles timeout error
Î“Â¥Ã® apiFetch: Request failed: TypeError: Failed to fetch
    at createNetworkError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/utils/createNetworkError.ts:2:24)
    at Object.onRequestError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:139:34)
    at handleResponse (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:58:15)
    at handleRequest (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:230:12)
    at globalThis.fetch (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:72:32)
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:27:17)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiFetch.test.ts:293:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  cause: Response {
    status: 0,
    statusText: '',
    headers: Headers {},
    body: null,
    bodyUsed: false,
    ok: false,
    redirected: false,
    type: 'error',
    url: ''
  }
}

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mRequest Construction[2m > [22m[2mconstructs URL correctly
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/users/123
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mRequest Construction[2m > [22m[2mconstructs URL correctly
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mRequest Construction[2m > [22m[2mhandles URL with query parameters
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/users?page=1&limit=10
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mRequest Construction[2m > [22m[2mhandles URL with query parameters
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mRequest Construction[2m > [22m[2mpasses request body correctly
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/data
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mRequest Construction[2m > [22m[2mpasses request body correctly
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mResponse Handling[2m > [22m[2mreturns response object
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/test
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2msuccessfully logs in user
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mResponse Handling[2m > [22m[2mreturns response object
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2msuccessfully logs in user
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mResponse Handling[2m > [22m[2mcan parse JSON response
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/json
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2msuccessfully logs in user
[22m[39mÎ“Â£Ã  AuthProvider: User data received: test@example.com

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mResponse Handling[2m > [22m[2mcan parse JSON response
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

stderr | tests/lib/api/auth.test.ts > Auth API Functions > Error Handling Edge Cases > handles timeout errors
Î“Â¥Ã® apiFetch: Request failed: TypeError: Failed to fetch
    at createNetworkError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/utils/createNetworkError.ts:2:24)
    at Object.onRequestError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:139:34)
    at handleResponse (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:58:15)
    at handleRequest (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:230:12)
    at globalThis.fetch (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:72:32)
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:27:17)
    at Module.login (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:19:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\auth.test.ts:410:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  cause: Response {
    status: 0,
    statusText: '',
    headers: Headers {},
    body: null,
    bodyUsed: false,
    ok: false,
    redirected: false,
    type: 'error',
    url: ''
  }
}

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mResponse Handling[2m > [22m[2mcan read text response
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/text
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mResponse Handling[2m > [22m[2mcan read text response
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mError Handling Edge Cases[2m > [22m[2mhandles empty responses
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mResponse Handling[2m > [22m[2mpreserves response headers
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/headers
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/auth.test.ts[2m > [22m[2mAuth API Functions[2m > [22m[2mError Handling Edge Cases[2m > [22m[2mhandles empty responses
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mResponse Handling[2m > [22m[2mpreserves response headers
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mResponse Handling[2m > [22m[2mpreserves response status code
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/created
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mResponse Handling[2m > [22m[2mpreserves response status code
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m201[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mEdge Cases[2m > [22m[2mhandles concurrent requests
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/concurrent/1
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/concurrent/2
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/concurrent/3
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mEdge Cases[2m > [22m[2mhandles concurrent requests
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mEdge Cases[2m > [22m[2mhandles concurrent requests
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m
â‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2msuccessfully logs in user
[22m[39mâ‰¡Æ’Ã¶Ã‰ AuthProvider: Logging in...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/login
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mEdge Cases[2m > [22m[2mhandles empty response body
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/delete
â‰¡Æ’Ã®Ã‰ apiFetch: Method: DELETE

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mEdge Cases[2m > [22m[2mhandles empty response body
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m204[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2msuccessfully logs in user
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2msuccessfully logs in user
[22m[39mâ‰¡Æ’Ã¶Ã‰ AuthProvider: Login successful, refreshing user data...
â‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mEdge Cases[2m > [22m[2mhandles very large payloads
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/large
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2msuccessfully logs in user
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2msuccessfully logs in user
[22m[39mÎ“Â£Ã  AuthProvider: User data received: test@example.com

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mEdge Cases[2m > [22m[2mhandles very large payloads
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mEdge Cases[2m > [22m[2mhandles special characters in endpoint
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/special%20chars
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/lib/api/apiFetch.test.ts[2m > [22m[2mapiFetch[2m > [22m[2mEdge Cases[2m > [22m[2mhandles special characters in endpoint
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mthrows error on login failure
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > login > throws error on login failure
Unhandled GET request to http://localhost:8000/api/auth/me

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mthrows error on login failure
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m404[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mthrows error on login failure
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Not Found"}

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > login > throws error on login failure
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Not Found"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:40:24

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mthrows error on login failure
[22m[39mÎ“Â¥Ã® AuthProvider: Failed to get user data: Error: {"detail":"Not Found"}
    at apiFetch [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\apiFetch.ts:45:15[90m)[39m
    at me [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\auth.ts:44:15[90m)[39m
    at [90mC:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\components\AuthProvider.tsx:40:24

 [32mÎ“Â£Ã´[39m tests/lib/api/auth.test.ts [2m([22m[2m26 tests[22m[2m)[22m[33m 384[2mms[22m[39m
[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mthrows error on login failure
[22m[39mâ‰¡Æ’Ã¶Ã‰ AuthProvider: Logging in...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/login
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mthrows error on login failure
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m401[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mthrows error on login failure
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Invalid credentials"}

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > login > throws error on login failure
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Invalid credentials"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at login (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:19:15)
    at Object.login (C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:68:7)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\components\AuthProvider.test.tsx:167:11

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mlogs login attempts with console
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mlogs login attempts with console
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mlogs login attempts with console
[22m[39mÎ“Â£Ã  AuthProvider: User data received: test@example.com

 [32mÎ“Â£Ã´[39m tests/lib/api/apiFetch.test.ts [2m([22m[2m38 tests[22m[2m)[22m[33m 451[2mms[22m[39m
[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mlogs login attempts with console
[22m[39mâ‰¡Æ’Ã¶Ã‰ AuthProvider: Logging in...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/login
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mlogs login attempts with console
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mlogs login attempts with console
[22m[39mâ‰¡Æ’Ã¶Ã‰ AuthProvider: Login successful, refreshing user data...
â‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mlogs login attempts with console
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogin[2m > [22m[2mlogs login attempts with console
[22m[39mÎ“Â£Ã  AuthProvider: User data received: test@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2msuccessfully registers user
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2msuccessfully registers user
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2msuccessfully registers user
[22m[39mÎ“Â£Ã  AuthProvider: User data received: new@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2msuccessfully registers user
[22m[39mâ‰¡Æ’Ã´Â¥ AuthProvider: Registering...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/register
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2msuccessfully registers user
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2msuccessfully registers user
[22m[39mâ‰¡Æ’Ã´Â¥ AuthProvider: Registration successful, refreshing user data...
â‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2msuccessfully registers user
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2msuccessfully registers user
[22m[39mÎ“Â£Ã  AuthProvider: User data received: new@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mthrows error on registration failure
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > register > throws error on registration failure
Unhandled GET request to http://localhost:8000/api/auth/me

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mthrows error on registration failure
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m404[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mthrows error on registration failure
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Not Found"}

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > register > throws error on registration failure
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Not Found"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:40:24

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mthrows error on registration failure
[22m[39mÎ“Â¥Ã® AuthProvider: Failed to get user data: Error: {"detail":"Not Found"}
    at apiFetch [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\apiFetch.ts:45:15[90m)[39m
    at me [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\auth.ts:44:15[90m)[39m
    at [90mC:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\components\AuthProvider.tsx:40:24

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mthrows error on registration failure
[22m[39mâ‰¡Æ’Ã´Â¥ AuthProvider: Registering...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/register
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mthrows error on registration failure
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m400[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mthrows error on registration failure
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Email already exists"}

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > register > throws error on registration failure
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Email already exists"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at register (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:9:15)
    at Object.register (C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:79:7)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\components\AuthProvider.test.tsx:280:11

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mlogs registration attempts with console
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mlogs registration attempts with console
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mlogs registration attempts with console
[22m[39mÎ“Â£Ã  AuthProvider: User data received: new@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mlogs registration attempts with console
[22m[39mâ‰¡Æ’Ã´Â¥ AuthProvider: Registering...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/register
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mlogs registration attempts with console
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mlogs registration attempts with console
[22m[39mâ‰¡Æ’Ã´Â¥ AuthProvider: Registration successful, refreshing user data...
â‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mlogs registration attempts with console
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mregister[2m > [22m[2mlogs registration attempts with console
[22m[39mÎ“Â£Ã  AuthProvider: User data received: new@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2msuccessfully logs out user
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2msuccessfully logs out user
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2msuccessfully logs out user
[22m[39mÎ“Â£Ã  AuthProvider: User data received: test@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2msuccessfully logs out user
[22m[39mâ‰¡Æ’ÃœÂ¬ AuthProvider: Logging out...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/logout
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2msuccessfully logs out user
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2msuccessfully logs out user
[22m[39mâ‰¡Æ’ÃœÂ¬ AuthProvider: Logged out

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2mlogs logout attempts with console
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2mlogs logout attempts with console
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2mlogs logout attempts with console
[22m[39mÎ“Â£Ã  AuthProvider: User data received: test@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2mlogs logout attempts with console
[22m[39mâ‰¡Æ’ÃœÂ¬ AuthProvider: Logging out...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/logout
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2mlogs logout attempts with console
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2mlogs logout attempts with console
[22m[39mâ‰¡Æ’ÃœÂ¬ AuthProvider: Logged out

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2mthrows error if logout API call fails
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2mthrows error if logout API call fails
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2mthrows error if logout API call fails
[22m[39mÎ“Â£Ã  AuthProvider: User data received: test@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mlogout[2m > [22m[2mthrows error if logout API call fails
[22m[39mâ‰¡Æ’ÃœÂ¬ AuthProvider: Logging out...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/logout
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > logout > throws error if logout API call fails
Î“Â¥Ã® apiFetch: Request failed: TypeError: Failed to fetch
    at createNetworkError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/utils/createNetworkError.ts:2:24)
    at Object.onRequestError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:139:34)
    at handleResponse (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:58:15)
    at handleRequest (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:230:12)
    at globalThis.fetch (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:72:32)
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:27:17)
    at logout (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:40:3)
    at Object.logout (C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:89:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\components\AuthProvider.test.tsx:432:11 {
  cause: Response {
    status: 0,
    statusText: '',
    headers: Headers {},
    body: null,
    bodyUsed: false,
    ok: false,
    redirected: false,
    type: 'error',
    url: ''
  }
}

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mrefreshes user data successfully
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mrefreshes user data successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mrefreshes user data successfully
[22m[39mÎ“Â£Ã  AuthProvider: User data received: test@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mrefreshes user data successfully
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mrefreshes user data successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mrefreshes user data successfully
[22m[39mÎ“Â£Ã  AuthProvider: User data received: test@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mhandles refresh errors gracefully
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mhandles refresh errors gracefully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mhandles refresh errors gracefully
[22m[39mÎ“Â£Ã  AuthProvider: User data received: test@example.com

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mhandles refresh errors gracefully
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > refresh > handles refresh errors gracefully
Î“Â¥Ã® apiFetch: Request failed: TypeError: Failed to fetch
    at createNetworkError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/utils/createNetworkError.ts:2:24)
    at Object.onRequestError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:139:34)
    at handleResponse (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:58:15)
    at handleRequest (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:230:12)
    at globalThis.fetch (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:72:32)
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:27:17)
    at me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at Object.refresh (C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:40:24)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\components\AuthProvider.test.tsx:507:9 {
  cause: Response {
    status: 0,
    statusText: '',
    headers: Headers {},
    body: null,
    bodyUsed: false,
    ok: false,
    redirected: false,
    type: 'error',
    url: ''
  }
}

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrefresh[2m > [22m[2mhandles refresh errors gracefully
[22m[39mÎ“Â¥Ã® AuthProvider: Failed to get user data: TypeError: Failed to fetch
    at createNetworkError [90m(file:///C:/Users/USER/Desktop/lokifi/apps/frontend/[39mnode_modules/[4m@mswjs/interceptors[24m/src/interceptors/fetch/utils/createNetworkError.ts:2:24[90m)[39m
    at Object.onRequestError [90m(file:///C:/Users/USER/Desktop/lokifi/apps/frontend/[39mnode_modules/[4m@mswjs/interceptors[24m/src/interceptors/fetch/index.ts:139:34[90m)[39m
    at handleResponse [90m(file:///C:/Users/USER/Desktop/lokifi/apps/frontend/[39mnode_modules/[4m@mswjs/interceptors[24m/src/utils/handleRequest.ts:58:15[90m)[39m
    at handleRequest [90m(file:///C:/Users/USER/Desktop/lokifi/apps/frontend/[39mnode_modules/[4m@mswjs/interceptors[24m/src/utils/handleRequest.ts:230:12[90m)[39m
    at globalThis.fetch [90m(file:///C:/Users/USER/Desktop/lokifi/apps/frontend/[39mnode_modules/[4m@mswjs/interceptors[24m/src/interceptors/fetch/index.ts:72:32[90m)[39m
    at apiFetch [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\apiFetch.ts:27:17[90m)[39m
    at me [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\auth.ts:44:15[90m)[39m
    at Object.refresh [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\components\AuthProvider.tsx:40:24[90m)[39m
    at [90mC:\Users\USER\Desktop\lokifi\apps\frontend\[39mtests\components\AuthProvider.test.tsx:507:9 {
  cause: Response {
    status: [33m0[39m,
    statusText: [32m''[39m,
    headers: Headers {},
    body: [1mnull[22m,
    bodyUsed: [33mfalse[39m,
    ok: [33mfalse[39m,
    redirected: [33mfalse[39m,
    type: [32m'error'[39m,
    url: [32m''[39m
  }
}

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > useAuth hook > throws error when used outside AuthProvider
Error: Uncaught [Error: useAuth must be used within AuthProvider]
    at reportException (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
    at invokeEventListeners (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
    at beginWork$1 (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:27490:7)
    at performUnitOfWork (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:26599:12) Error: useAuth must be used within AuthProvider
    at useAuth (C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:111:19)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\components\AuthProvider.test.tsx:519:26
    at TestComponent (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\@testing-library\react\dist\pure.js:331:27)
    at renderWithHooks (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:350:25)
    at invokeEventListeners (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
Error: Uncaught [Error: useAuth must be used within AuthProvider]
    at reportException (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
    at invokeEventListeners (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
    at invokeGuardedCallback (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
    at beginWork$1 (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:27490:7)
    at performUnitOfWork (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:26599:12) Error: useAuth must be used within AuthProvider
    at useAuth (C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:111:19)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\components\AuthProvider.test.tsx:519:26
    at TestComponent (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\@testing-library\react\dist\pure.js:331:27)
    at renderWithHooks (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
    at mountIndeterminateComponent (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
    at beginWork (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
    at HTMLUnknownElement.callCallback (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
    at innerInvokeEventListeners (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:350:25)
    at invokeEventListeners (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
The above error occurred in the <TestComponent> component:

    at TestComponent (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\@testing-library\react\dist\pure.js:329:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2museAuth hook[2m > [22m[2mreturns context value when used inside AuthProvider
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

stderr | tests/components/AuthProvider.test.tsx > AuthProvider > renders children correctly > renders child components
Unhandled GET request to http://localhost:8000/api/auth/me

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrenders children correctly[2m > [22m[2mrenders child components
[22m[39mâ‰¡Æ’Ã¶Ã¤ AuthProvider: Refreshing user data...
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/auth/me
â‰¡Æ’Ã®Ã‰ apiFetch: Method: GET

[90mstdout[2m | tests/components/AuthProvider.test.tsx[2m > [22m[2mAuthProvider[2m > [22m[2mrenders children correctly
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m404[39m

[90mstdout[2m | tests/components/AuthProvider.test.tsx
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Not Found"}

stderr | tests/components/AuthProvider.test.tsx
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Not Found"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:40:24

[90mstdout[2m | tests/components/AuthProvider.test.tsx
[22m[39mÎ“Â¥Ã® AuthProvider: Failed to get user data: Error: {"detail":"Not Found"}
    at apiFetch [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\apiFetch.ts:45:15[90m)[39m
    at me [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\auth.ts:44:15[90m)[39m
    at [90mC:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\components\AuthProvider.tsx:40:24

stderr | tests/components/AuthProvider.test.tsx
Unhandled GET request to http://localhost:8000/api/auth/me

[90mstdout[2m | tests/components/AuthProvider.test.tsx
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m404[39m

stderr | tests/components/AuthProvider.test.tsx
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Not Found"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at me (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\auth.ts:44:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\src\components\AuthProvider.tsx:40:24

[90mstdout[2m | tests/components/AuthProvider.test.tsx
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Not Found"}

[90mstdout[2m | tests/components/AuthProvider.test.tsx
[22m[39mÎ“Â¥Ã® AuthProvider: Failed to get user data: Error: {"detail":"Not Found"}
    at apiFetch [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\apiFetch.ts:45:15[90m)[39m
    at me [90m(C:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\lib\api\auth.ts:44:15[90m)[39m
    at [90mC:\Users\USER\Desktop\lokifi\apps\frontend\[39msrc\components\AuthProvider.tsx:40:24

 [32mÎ“Â£Ã´[39m tests/components/AuthProvider.test.tsx [2m([22m[2m18 tests[22m[2m)[22m[33m 1545[2mms[22m[39m
[90mstdout[2m | tests/api/contracts/websocket.contract.test.ts[2m > [22m[2mWebSocket API Contract[2m > [22m[2mConnection[2m > [22m[2mreceives real-time price updates
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  No price updates received (expected in test env)

[90mstdout[2m | tests/api/contracts/websocket.contract.test.ts[2m > [22m[2mWebSocket API Contract[2m > [22m[2mError Handling[2m > [22m[2mrejects malformed messages
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  Skipping - WebSocket not connected

stderr | tests/security/input-validation.test.ts > Security: Input Validation > XML Injection Protection > rejects XML external entity (XXE) attacks
Unhandled POST request to http://localhost:8000/api/import

[90mstdout[2m | tests/security/input-validation.test.ts[2m > [22m[2mSecurity: Input Validation[2m > [22m[2mNoSQL Injection Protection[2m > [22m[2mrejects MongoDB injection operators
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  NoSQL payload processed: {"$gt": ""}

[90mstdout[2m | tests/security/input-validation.test.ts[2m > [22m[2mSecurity: Input Validation[2m > [22m[2mNoSQL Injection Protection[2m > [22m[2mrejects MongoDB injection operators
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  NoSQL payload processed: {"$ne": null}

[90mstdout[2m | tests/security/input-validation.test.ts[2m > [22m[2mSecurity: Input Validation[2m > [22m[2mNoSQL Injection Protection[2m > [22m[2mrejects MongoDB injection operators
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  NoSQL payload processed: {"$regex": ".*"}

 [32mÎ“Â£Ã´[39m tests/api/contracts/websocket.contract.test.ts [2m([22m[2m4 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[33m 3106[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m WebSocket API Contract[2m > [22mConnection[2m > [22mreceives real-time price updates [33m 3010[2mms[22m[39m
stderr | tests/security/input-validation.test.ts > Security: Input Validation > HTTP Header Injection > rejects CRLF injection in redirects
Unhandled GET request to http://localhost:8000/api/redirect?url=http%3A%2F%2Fevil.com%0D%0ASet-Cookie%3A%20evil%3Dtrue

[90mstdout[2m | tests/security/input-validation.test.ts[2m > [22m[2mSecurity: Input Validation[2m > [22m[2mUnicode Normalization[2m > [22m[2mhandles unicode homoglyphs
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  Homoglyph test for: â•¨â–‘dmin - Status: 200

[90mstdout[2m | tests/security/input-validation.test.ts[2m > [22m[2mSecurity: Input Validation[2m > [22m[2mUnicode Normalization[2m > [22m[2mhandles unicode homoglyphs
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  Homoglyph test for: Î“Ã â–‘nvalid - Status: 200

[90mstdout[2m | tests/security/input-validation.test.ts[2m > [22m[2mSecurity: Input Validation[2m > [22m[2mUnicode Normalization[2m > [22m[2mhandles unicode homoglyphs
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  Homoglyph test for: â‰¡Â¥Ã‰Â«ser - Status: 200

[90mstdout[2m | tests/security/input-validation.test.ts[2m > [22m[2mSecurity: Input Validation[2m > [22m[2mContent Security Policy[2m > [22m[2mincludes CSP headers
[22m[39mÎ“Â£Ã  CSP Header: default-src 'self'

[90mstdout[2m | tests/security/input-validation.test.ts[2m > [22m[2mSecurity: Input Validation[2m > [22m[2mSecurity Headers[2m > [22m[2mincludes security headers
[22m[39mSecurity Headers: {
  [32m'X-Content-Type-Options'[39m: [32m'nosniff'[39m,
  [32m'X-Frame-Options'[39m: [32m'DENY'[39m,
  [32m'X-XSS-Protection'[39m: [32m'1; mode=block'[39m,
  [32m'Strict-Transport-Security'[39m: [32m'max-age=31536000; includeSubDomains'[39m
}

 [32mÎ“Â£Ã´[39m tests/security/input-validation.test.ts [2m([22m[2m13 tests[22m[2m | [22m[33m3 skipped[39m[2m)[22m[33m 368[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/components/PriceChart.test.tsx [2m([22m[2m25 tests[22m[2m)[22m[33m 580[2mms[22m[39m
stderr | tests/a11y/components.a11y.test.tsx > Component Accessibility Tests > should detect color contrast issues
Error: Not implemented: HTMLCanvasElement.prototype.getContext (without installing the canvas npm package)
    at module.exports (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\browser\not-implemented.js:9:17)
    at HTMLCanvasElementImpl.getContext (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\nodes\HTMLCanvasElement-impl.js:42:5)
    at HTMLCanvasElement.getContext (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jsdom\lib\jsdom\living\generated\HTMLCanvasElement.js:131:58)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jest-axe\node_modules\axe-core\axe.js:13407:49
    at Object.get (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jest-axe\node_modules\axe-core\axe.js:7719:23)
    at _isIconLigature (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jest-axe\node_modules\axe-core\axe.js:13406:41)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jest-axe\node_modules\axe-core\axe.js:27313:54
    at Array.some (<anonymous>)
    at hasRealTextChildren (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jest-axe\node_modules\axe-core\axe.js:27312:35)
    at Rule.colorContrastMatches [as matches] (C:\Users\USER\Desktop\lokifi\apps\frontend\node_modules\jest-axe\node_modules\axe-core\axe.js:27277:12) undefined

 [32mÎ“Â£Ã´[39m tests/a11y/components.a11y.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 443[2mms[22m[39m
stderr | tests/lib/api/apiClient.test.ts > APIClient > getSymbols > handles validation error for invalid response
API response validation failed: ZodError: [
  {
    "code": "invalid_type",
    "expected": "array",
    "received": "string",
    "path": [
      "data"
    ],
    "message": "Expected array, received string"
  }
]
    at Object.get error [as error] (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/zod/v3/types.js:39:31)
    at APIClient.request (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiClient.ts:133:63)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiClient.test.ts:116:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  issues: [
    {
      code: 'invalid_type',
      expected: 'array',
      received: 'string',
      path: [Array],
      message: 'Expected array, received string'
    }
  ],
  addIssue: [Function (anonymous)],
  addIssues: [Function (anonymous)],
  errors: [
    {
      code: 'invalid_type',
      expected: 'array',
      received: 'string',
      path: [Array],
      message: 'Expected array, received string'
    }
  ]
}

stderr | tests/lib/api/apiClient.test.ts > APIClient > getSymbols > handles validation error for invalid response
API response validation failed: ZodError: [
  {
    "code": "invalid_type",
    "expected": "array",
    "received": "string",
    "path": [
      "data"
    ],
    "message": "Expected array, received string"
  }
]
    at Object.get error [as error] (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/zod/v3/types.js:39:31)
    at APIClient.request (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiClient.ts:133:63)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiClient.test.ts:117:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  issues: [
    {
      code: 'invalid_type',
      expected: 'array',
      received: 'string',
      path: [Array],
      message: 'Expected array, received string'
    }
  ],
  addIssue: [Function (anonymous)],
  addIssues: [Function (anonymous)],
  errors: [
    {
      code: 'invalid_type',
      expected: 'array',
      received: 'string',
      path: [Array],
      message: 'Expected array, received string'
    }
  ]
}

stderr | tests/lib/api/apiClient.test.ts > APIClient > getOHLC > handles invalid OHLC data format
API response validation failed: ZodError: [
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "string",
    "path": [
      "data",
      0,
      "timestamp"
    ],
    "message": "Expected number, received string"
  }
]
    at Object.get error [as error] (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/zod/v3/types.js:39:31)
    at APIClient.request (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiClient.ts:133:63)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiClient.test.ts:238:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  issues: [
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'string',
      path: [Array],
      message: 'Expected number, received string'
    }
  ],
  addIssue: [Function (anonymous)],
  addIssues: [Function (anonymous)],
  errors: [
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'string',
      path: [Array],
      message: 'Expected number, received string'
    }
  ]
}

stderr | tests/lib/api/apiClient.test.ts > APIClient > getTicker > validates ticker response structure
API response validation failed: ZodError: [
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "price"
    ],
    "message": "Required"
  },
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "change_24h"
    ],
    "message": "Required"
  },
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "volume_24h"
    ],
    "message": "Required"
  },
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "high_24h"
    ],
    "message": "Required"
  },
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "low_24h"
    ],
    "message": "Required"
  },
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "timestamp"
    ],
    "message": "Required"
  }
]
    at Object.get error [as error] (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/zod/v3/types.js:39:31)
    at APIClient.request (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiClient.ts:133:63)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiClient.test.ts:338:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  issues: [
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    }
  ],
  addIssue: [Function (anonymous)],
  addIssues: [Function (anonymous)],
  errors: [
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    }
  ]
}

stderr | tests/lib/api/apiClient.test.ts > APIClient > getTicker > validates ticker response structure
API response validation failed: ZodError: [
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "price"
    ],
    "message": "Required"
  },
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "change_24h"
    ],
    "message": "Required"
  },
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "volume_24h"
    ],
    "message": "Required"
  },
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "high_24h"
    ],
    "message": "Required"
  },
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "low_24h"
    ],
    "message": "Required"
  },
  {
    "code": "invalid_type",
    "expected": "number",
    "received": "undefined",
    "path": [
      "data",
      "timestamp"
    ],
    "message": "Required"
  }
]
    at Object.get error [as error] (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/zod/v3/types.js:39:31)
    at APIClient.request (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiClient.ts:133:63)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\apiClient.test.ts:339:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  issues: [
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    }
  ],
  addIssue: [Function (anonymous)],
  addIssues: [Function (anonymous)],
  errors: [
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    },
    {
      code: 'invalid_type',
      expected: 'number',
      received: 'undefined',
      path: [Array],
      message: 'Required'
    }
  ]
}

 [32mÎ“Â£Ã´[39m tests/lib/api/apiClient.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 271[2mms[22m[39m
[90mstdout[2m | tests/security/auth-security.test.ts[2m > [22m[2mSecurity: Authentication[2m > [22m[2mRate Limiting[2m > [22m[2menforces rate limiting on login attempts
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  Rate limiting not detected - may need configuration

 [32mÎ“Â£Ã´[39m tests/components/SymbolTfBar.test.tsx [2m([22m[2m33 tests[22m[2m)[22m[33m 6099[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m SymbolTfBar[2m > [22mSymbol Input[2m > [22mapplies symbol on Set button click [33m 302[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m SymbolTfBar[2m > [22mTimeframe Presets[2m > [22mapplies each timeframe preset correctly [33m 530[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m SymbolTfBar[2m > [22mFreeform Timeframe Input[2m > [22mhandles different timeframe formats [33m 614[2mms[22m[39m
[90mstdout[2m | tests/security/auth-security.test.ts[2m > [22m[2mSecurity: Authentication[2m > [22m[2mRate Limiting[2m > [22m[2menforces rate limiting on API endpoints
[22m[39mÎ“Ã¤â•£âˆ©â••Ã…  No rate limiting detected for health endpoint

[90mstdout[2m | tests/security/auth-security.test.ts[2m > [22m[2mSecurity: Authentication[2m > [22m[2mPassword Security[2m > [22m[2mrejects weak passwords
[22m[39mÎ“ÃœÃ¡âˆ©â••Ã…  Weak password accepted: 123

[90mstdout[2m | tests/security/auth-security.test.ts[2m > [22m[2mSecurity: Authentication[2m > [22m[2mPassword Security[2m > [22m[2mrejects weak passwords
[22m[39mÎ“ÃœÃ¡âˆ©â••Ã…  Weak password accepted: password

[90mstdout[2m | tests/security/auth-security.test.ts[2m > [22m[2mSecurity: Authentication[2m > [22m[2mPassword Security[2m > [22m[2mrejects weak passwords
[22m[39mÎ“ÃœÃ¡âˆ©â••Ã…  Weak password accepted: abc

[90mstdout[2m | tests/security/auth-security.test.ts[2m > [22m[2mSecurity: Authentication[2m > [22m[2mPassword Security[2m > [22m[2mrejects weak passwords
[22m[39mÎ“ÃœÃ¡âˆ©â••Ã…  Weak password accepted: 12345678

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2msends chat request successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2msends chat request successfully
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles multi-turn conversation
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles multi-turn conversation
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles system messages
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles system messages
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles messages with name field
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles messages with name field
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles response with result field
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles response with result field
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles empty messages array
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles empty messages array
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles long conversation history
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles long conversation history
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles messages with special characters
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles messages with special characters
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles very long message content
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mchat function[2m > [22m[2mhandles very long message content
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 400 bad request
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 400 bad request
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m400[39m

stderr | tests/lib/api/chat.test.ts > Chat API > Error Handling > throws error on 400 bad request
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Invalid message format"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at chat (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\chat.ts:7:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\chat.test.ts:236:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 400 bad request
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Invalid message format"}

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 401 unauthorized
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 401 unauthorized
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m401[39m

stderr | tests/lib/api/chat.test.ts > Chat API > Error Handling > throws error on 401 unauthorized
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Authentication required"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at chat (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\chat.ts:7:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\chat.test.ts:248:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 401 unauthorized
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Authentication required"}

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 429 rate limit
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 429 rate limit
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m429[39m

stderr | tests/lib/api/chat.test.ts > Chat API > Error Handling > throws error on 429 rate limit
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Rate limit exceeded"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at chat (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\chat.ts:7:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\chat.test.ts:260:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 429 rate limit
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Rate limit exceeded"}

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 500 server error
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 500 server error
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m500[39m

stderr | tests/lib/api/chat.test.ts > Chat API > Error Handling > throws error on 500 server error
Î“Â¥Ã® apiFetch: Request failed: Error: {"detail":"Internal server error"}
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:45:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at chat (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\chat.ts:7:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\chat.test.ts:272:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on 500 server error
[22m[39mÎ“Â¥Ã® apiFetch: Error response: {"detail":"Internal server error"}

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mthrows error on network failure
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

stderr | tests/lib/api/chat.test.ts > Chat API > Error Handling > throws error on network failure
Î“Â¥Ã® apiFetch: Request failed: TypeError: Failed to fetch
    at createNetworkError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/utils/createNetworkError.ts:2:24)
    at Object.onRequestError (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:139:34)
    at handleResponse (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:58:15)
    at handleRequest (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/utils/handleRequest.ts:230:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at globalThis.fetch (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@mswjs/interceptors/src/interceptors/fetch/index.ts:72:32)
    at apiFetch (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\apiFetch.ts:27:17)
    at chat (C:\Users\USER\Desktop\lokifi\apps\frontend\src\lib\api\chat.ts:7:15)
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\api\chat.test.ts:284:7
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:20 {
  cause: Response {
    status: 0,
    statusText: '',
    headers: Headers {},
    body: null,
    bodyUsed: false,
    ok: false,
    redirected: false,
    type: 'error',
    url: ''
  }
}

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mhandles malformed JSON response
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mhandles malformed JSON response
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mhandles empty response body
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mError Handling[2m > [22m[2mhandles empty response body
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mResponse Modes[2m > [22m[2mhandles general mode
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mResponse Modes[2m > [22m[2mhandles general mode
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mResponse Modes[2m > [22m[2mhandles trading mode
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mResponse Modes[2m > [22m[2mhandles trading mode
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mResponse Modes[2m > [22m[2mhandles analysis mode
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mResponse Modes[2m > [22m[2mhandles analysis mode
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mResponse Modes[2m > [22m[2mhandles query mode
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mResponse Modes[2m > [22m[2mhandles query mode
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

 [32mÎ“Â£Ã´[39m tests/security/auth-security.test.ts [2m([22m[2m17 tests[22m[2m)[22m[33m 811[2mms[22m[39m
   [33m[2mÎ“Â£Ã´[22m[39m Security: Authentication[2m > [22mRate Limiting[2m > [22menforces rate limiting on API endpoints [33m 369[2mms[22m[39m
[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mMessage Types[2m > [22m[2mvalidates user role messages
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mMessage Types[2m > [22m[2mvalidates user role messages
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mMessage Types[2m > [22m[2mvalidates assistant role messages
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mMessage Types[2m > [22m[2mvalidates assistant role messages
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mMessage Types[2m > [22m[2mvalidates system role messages
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mMessage Types[2m > [22m[2mvalidates system role messages
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mMessage Types[2m > [22m[2mhandles mixed message types
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mMessage Types[2m > [22m[2mhandles mixed message types
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mhandles concurrent chat requests
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST
â‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mhandles concurrent chat requests
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mhandles concurrent chat requests
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m
â‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mhandles response with additional fields
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mhandles response with additional fields
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mhandles unicode and emoji in messages
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mhandles unicode and emoji in messages
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mhandles newlines and whitespace in content
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mhandles newlines and whitespace in content
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mpreserves message order
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Making request to: http://localhost:8000/api/chat
â‰¡Æ’Ã®Ã‰ apiFetch: Method: POST

[90mstdout[2m | tests/lib/api/chat.test.ts[2m > [22m[2mChat API[2m > [22m[2mEdge Cases[2m > [22m[2mpreserves message order
[22m[39mâ‰¡Æ’Ã®Ã‰ apiFetch: Response status: [33m200[39m

 [32mÎ“Â£Ã´[39m tests/lib/api/chat.test.ts [2m([22m[2m29 tests[22m[2m)[22m[33m 368[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/hooks/useMarketData.test.ts [2m([22m[2m36 tests[22m[2m)[22m[33m 353[2mms[22m[39m
stderr | tests/lib/data/adapter.test.ts > MarketDataAdapter > HTTP Provider > falls back to mock when CANDLES_URL not set
NEXT_PUBLIC_CANDLES_URL not set; falling back to mock.

stderr | tests/lib/data/adapter.test.ts > MarketDataAdapter > HTTP Provider > falls back to mock on HTTP fetch error
HTTP provider failed; falling back to mock. Error: Network error
    at C:\Users\USER\Desktop\lokifi\apps\frontend\tests\lib\data\adapter.test.ts:312:53
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:155:11
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:752:26
    at file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:1897:20
    at new Promise (<anonymous>)
    at runWithTimeout (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:1863:10)
    at runTest (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:1574:12)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runSuite (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)
    at runSuite (file:///C:/Users/USER/Desktop/lokifi/apps/frontend/node_modules/@vitest/runner/dist/chunk-hooks.js:1729:8)

stderr | tests/lib/data/adapter.test.ts > MarketDataAdapter > WebSocket Provider > falls back to mock when STREAM_URL not set
NEXT_PUBLIC_STREAM_URL not set; falling back to mock.

 [32mÎ“Â£Ã´[39m tests/unit/utils/webVitals.test.ts [2m([22m[2m21 tests[22m[2m)[22m[33m 312[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/lib/data/adapter.test.ts [2m([22m[2m45 tests[22m[2m)[22m[32m 198[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/api/contracts/ohlc.contract.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 197[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/multiChart.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 186[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/api/contracts/auth.contract.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 125[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/lib/utils/featureFlags.test.ts [2m([22m[2m40 tests[22m[2m)[22m[32m 139[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/stores/multiChartStore.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[32m 116[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/lib/utils/storage.test.ts [2m([22m[2m43 tests[22m[2m)[22m[32m 75[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/lib/lw-mapping.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 71[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/charts/lw-mapping.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 50[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/lib/data/dashboardData.test.ts [2m([22m[2m50 tests[22m[2m)[22m[32m 90[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/lib/utils/alerts.test.ts [2m([22m[2m38 tests[22m[2m)[22m[32m 116[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/utils/persist.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/utils/perf.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 27[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/lib/utils/perf.test.ts [2m([22m[2m25 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[32m 114[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/utils/portfolio.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/lib/data/persistence.test.ts [2m([22m[2m38 tests[22m[2m)[22m[32m 47[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/utils/pdf.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 39[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/utils/notify.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/lib/portfolio.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 60[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/charts/indicators.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/utils/measure.test.ts [2m([22m[2m28 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/security/auth.security.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/security/validation.security.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/unit/charts/chartUtils.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/security/xss.security.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [32mÎ“Â£Ã´[39m tests/security/csrf.security.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 8[2mms[22m[39m
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Errors Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Unhandled Rejection Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
APIError: HTTP 500: Unhandled Exception
 Î“Â¥Â» APIClient.request src/lib/api/apiClient.ts:122:13
    120|       }
    121|       
    122|       throw new APIError(
       |             ^
    123|         `HTTP ${response.status}: ${response.statusText}`,
    124|         'HTTP_ERROR',
 Î“Â¥Â» runNextTicks node:internal/process/task_queues:65:5
 Î“Â¥Â» processTimers node:internal/timers:520:9

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»
Serialized Error: { code: 'HTTP_ERROR', status: 500, details: undefined }
This error originated in "tests/lib/api/apiClient.test.ts" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»


[2m Test Files [22m [1m[32m39 passed[39m[22m[90m (39)[39m
[2m      Tests [22m [1m[32m800 passed[39m[22m[2m | [22m[33m5 skipped[39m[90m (805)[39m
[2m     Errors [22m [1m[31m1 error[39m[22m
[2m   Start at [22m 19:08:19
[2m   Duration [22m 34.10s[2m (transform 2.43s, setup 38.02s, collect 4.79s, tests 16.94s, environment 60.08s, prepare 11.86s)[22m

[34m % [39m[2mCoverage report from [22m[33mv8[39m
-------------------|---------|----------|---------|---------|-------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
-------------------|---------|----------|---------|---------|-------------------
All files          |    3.92 |    82.91 |   77.61 |    3.92 |                   
 frontend          |       0 |       40 |      40 |       0 |                   
  jest.setup.js    |       0 |        0 |       0 |       0 | 1-41              
  middleware.ts    |       0 |        0 |       0 |       0 | 1-20              
  next.config.mjs  |       0 |        0 |       0 |       0 | 1-64              
  ...ght.config.ts |       0 |        0 |       0 |       0 | 1-122             
  ...css.config.js |       0 |        0 |       0 |       0 | 1                 
  ...ent.config.ts |       0 |      100 |     100 |       0 | 5-67              
  ...dge.config.ts |       0 |      100 |     100 |       0 | 5-32              
  ...ver.config.ts |       0 |      100 |     100 |       0 | 5-54              
  setupTests.ts    |       0 |        0 |       0 |       0 | 1-35              
  ...ind.config.ts |       0 |      100 |     100 |       0 | 2-15              
 frontend/app      |       0 |    66.66 |   66.66 |       0 |                   
  _app.tsx         |       0 |      100 |     100 |       0 | 6-42              
  layout.tsx       |       0 |        0 |       0 |       0 | 1-39              
  page.tsx         |       0 |      100 |     100 |       0 | 2-18              
 ...end/app/alerts |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-211             
 ...app/api/health |       0 |        0 |       0 |       0 |                   
  route.ts         |       0 |        0 |       0 |       0 | 1-5               
 ...asset/[symbol] |       0 |        0 |       0 |       0 |                   
  page.tsx         |       0 |        0 |       0 |       0 | 1-574             
  page_clean.tsx   |       0 |        0 |       0 |       0 | 1-531             
  page_new.tsx     |       0 |        0 |       0 |       0 | 1-635             
 ...tend/app/chart |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 2-6               
 ...chart/[symbol] |       0 |        0 |       0 |       0 |                   
  page.tsx         |       0 |        0 |       0 |       0 | 1-748             
 frontend/app/chat |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-70              
 .../app/dashboard |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-604             
 ...ard/add-assets |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-22              
 ...d-assets/banks |       0 |        0 |       0 |       0 |                   
  page.tsx         |       0 |        0 |       0 |       0 |                   
 ...crypto-tickers |       0 |        0 |       0 |       0 |                   
  page.tsx         |       0 |        0 |       0 |       0 |                   
 ...-assets/stocks |       0 |        0 |       0 |       0 |                   
  page.tsx         |       0 |        0 |       0 |       0 |                   
 ...shboard/assets |       0 |      100 |     100 |       0 |                   
  page-old.tsx     |       0 |      100 |     100 |       0 | 3-365             
  page.tsx         |       0 |      100 |     100 |       0 | 3-539             
 .../app/dev/flags |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 2-53              
 ...tend/app/login |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-24              
 ...nd/app/markets |       0 |      100 |     100 |       0 |                   
  layout.tsx       |       0 |      100 |     100 |       0 | 9-92              
  page.tsx         |       0 |      100 |     100 |       0 | 3-212             
 ...markets/crypto |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-355             
 .../markets/forex |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 10-209            
 ...arkets/indices |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 10-207            
 ...markets/stocks |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 10-293            
 .../notifications |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 4-57              
 ...ns/preferences |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-441             
 .../app/portfolio |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-892             
 ...lio/add-assets |       0 |        0 |       0 |       0 |                   
  page.tsx         |       0 |        0 |       0 |       0 |                   
 ...d-assets/banks |       0 |        0 |       0 |       0 |                   
  page.tsx         |       0 |        0 |       0 |       0 |                   
 ...crypto-tickers |       0 |        0 |       0 |       0 |                   
  page.tsx         |       0 |        0 |       0 |       0 |                   
 ...-assets/stocks |       0 |        0 |       0 |       0 |                   
  page.tsx         |       0 |        0 |       0 |       0 |                   
 ...rtfolio/assets |       0 |        0 |       0 |       0 |                   
  page.tsx         |       0 |        0 |       0 |       0 |                   
 ...nd/app/profile |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-403             
 ...p/profile/edit |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-378             
 ...ofile/settings |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-510             
 frontend/app/test |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-134             
 ...pp/test-sentry |       0 |      100 |     100 |       0 |                   
  page.tsx         |       0 |      100 |     100 |       0 | 3-115             
 ...end/components |       0 |    94.59 |   94.59 |       0 |                   
  ...rBoundary.tsx |       0 |      100 |     100 |       0 | 2-62              
  ChartHeader.tsx  |       0 |      100 |     100 |       0 | 2-143             
  ...dingState.tsx |       0 |      100 |     100 |       0 | 2-23              
  ChartPanel.tsx   |       0 |      100 |     100 |       0 | 2-1064            
  ChartPanelV2.tsx |       0 |      100 |     100 |       0 | 2-537             
  ChartSidebar.tsx |       0 |      100 |     100 |       0 | 2-194             
  ContextMenu.tsx  |       0 |        0 |       0 |       0 | 1-29              
  CopilotChat.tsx  |       0 |      100 |     100 |       0 | 2-74              
  CryptoTable.tsx  |       0 |        0 |       0 |       0 |                   
  DrawToolbar.tsx  |       0 |      100 |     100 |       0 | 3-54              
  DrawingChart.tsx |       0 |      100 |     100 |       0 | 3-437             
  ...ngToolbar.tsx |       0 |      100 |     100 |       0 | 2-322             
  ...ncedChart.tsx |       0 |      100 |     100 |       0 | 2-305             
  ...bolPicker.tsx |       0 |      100 |     100 |       0 | 2-299             
  GlobalHeader.tsx |       0 |      100 |     100 |       0 | 3-274             
  ...atorModal.tsx |       0 |      100 |     100 |       0 | 2-235             
  ...orModalV2.tsx |       0 |      100 |     100 |       0 | 2-228             
  ...atorPanel.tsx |       0 |      100 |     100 |       0 | 2-51              
  ...ngsDrawer.tsx |       0 |      100 |     100 |       0 | 2-82              
  LeftDock.tsx     |       0 |      100 |     100 |       0 | 3-51              
  ...tOverview.tsx |       0 |        0 |       0 |       0 |                   
  ...artLayout.tsx |       0 |      100 |     100 |       0 | 3-73              
  ...PaneChart.tsx |       0 |      100 |     100 |       0 | 3-276             
  Navigation.tsx   |       0 |        0 |       0 |       0 |                   
  NewsList.tsx     |       0 |      100 |     100 |       0 | 2-20              
  ...ationBell.tsx |       0 |      100 |     100 |       0 | 8-283             
  ...ionCenter.tsx |       0 |      100 |     100 |       0 | 8-599             
  ObjectTree.tsx   |       0 |      100 |     100 |       0 | 2-302             
  ...ngsDrawer.tsx |       0 |      100 |     100 |       0 | 2-129             
  ...deToolbar.tsx |       0 |      100 |     100 |       0 | 3-45              
  SWRProvider.tsx  |       0 |      100 |     100 |       0 | 3-17              
  SymbolPicker.tsx |       0 |      100 |     100 |       0 | 2-12              
  ...amePicker.tsx |       0 |      100 |     100 |       0 | 2-25              
  TopHeader.tsx    |       0 |        0 |       0 |       0 |                   
  ...Workspace.tsx |       0 |      100 |     100 |       0 | 2-244             
  ...listPanel.tsx |       0 |        0 |       0 |       0 | 1-440             
  ...onnection.tsx |       0 |      100 |     100 |       0 | 2-244             
 .../components/ui |       0 |        0 |       0 |       0 |                   
  button.tsx       |       0 |        0 |       0 |       0 | 1-42              
  card.tsx         |       0 |        0 |       0 |       0 | 1-80              
 frontend/hooks    |       0 |      100 |     100 |       0 |                   
  useAuth.tsx      |       0 |      100 |     100 |       0 | 3-132             
  ...dShortcuts.ts |       0 |      100 |     100 |       0 | 2-82              
 frontend/lib      |       0 |      100 |     100 |       0 |                   
  featureFlags.ts  |       0 |      100 |     100 |       0 | 34-120            
  multiChart.tsx   |       0 |      100 |     100 |       0 | 6-377             
 frontend/plugins  |       0 |       70 |      70 |       0 |                   
  fibExtended.ts   |       0 |        0 |       0 |       0 | 1-51              
  index.ts         |       0 |      100 |     100 |       0 | 8-21              
  manager.ts       |       0 |      100 |     100 |       0 | 5-195             
  metadata.ts      |       0 |      100 |     100 |       0 | 9-16              
  ...lelChannel.ts |       0 |        0 |       0 |       0 | 1-71              
  ...elChannel3.ts |       0 |        0 |       0 |       0 | 1-65              
  registry.ts      |       0 |      100 |     100 |       0 | 3-7               
  rulerMeasure.ts  |       0 |      100 |     100 |       0 | 2-45              
  trendlinePlus.ts |       0 |      100 |     100 |       0 | 2-45              
  types.ts         |       0 |        0 |       0 |       0 |                   
 frontend/src      |       0 |      100 |     100 |       0 |                   
  App.tsx          |       0 |      100 |     100 |       0 | 2-35              
 ...src/components |   10.61 |    72.56 |   62.22 |   10.61 |                   
  AlertModal.tsx   |       0 |        0 |       0 |       0 | 1-105             
  AlertPortal.tsx  |       0 |        0 |       0 |       0 | 1-14              
  AlertsPanel.tsx  |       0 |        0 |       0 |       0 | 1-98              
  AuthModal.tsx    |       0 |      100 |     100 |       0 | 3-571             
  AuthProvider.tsx |     100 |      100 |     100 |     100 |                   
  DataStatus.tsx   |     100 |      100 |     100 |     100 |                   
  DrawingLayer.tsx |       0 |        0 |       0 |       0 | 1-541             
  ...gSettings.tsx |       0 |      100 |     100 |       0 | 2-33              
  ...ingsPanel.tsx |       0 |        0 |       0 |       0 | 1-216             
  ...SidePanel.tsx |       0 |      100 |     100 |       0 | 2-37              
  ...tylePanel.tsx |       0 |        0 |       0 |       0 | 1-87              
  ...portPanel.tsx |       0 |      100 |     100 |       0 | 3-122             
  ...ngsDrawer.tsx |       0 |      100 |     100 |       0 | 2-67              
  LabelsLayer.tsx  |       0 |        0 |       0 |       0 | 1-33              
  LayersPanel.tsx  |       0 |        0 |       0 |       0 | 1-63              
  Logo.tsx         |       0 |        0 |       0 |       0 |                   
  Navbar.tsx       |       0 |      100 |     100 |       0 | 3-53              
  ...Inspector.tsx |       0 |        0 |       0 |       0 | 1-137             
  PluginDrawer.tsx |       0 |        0 |       0 |       0 | 1-67              
  ...inManager.tsx |       0 |        0 |       0 |       0 | 1-35              
  PriceChart.tsx   |    46.4 |    58.82 |   66.66 |    46.4 | ...16-306,331-359 
  ProjectBar.tsx   |       0 |        0 |       0 |       0 | 1-108             
  ...ctedRoute.tsx |       0 |      100 |     100 |       0 | 3-88              
  ...yProvider.tsx |       0 |      100 |     100 |       0 | 10-24             
  ...tComposer.tsx |       0 |        0 |       0 |       0 | 1-111             
  ReportPortal.tsx |       0 |        0 |       0 |       0 | 1-12              
  ...onToolbar.tsx |       0 |      100 |     100 |       0 | 2-19              
  ShareBar.tsx     |       0 |      100 |     100 |       0 | 3-98              
  ...hotsPanel.tsx |       0 |        0 |       0 |       0 | 1-50              
  SymbolTfBar.tsx  |   98.86 |    93.93 |     100 |   98.86 | 66                
 ...ents/dashboard |       0 |      100 |     100 |       0 |                   
  APIKeyModal.tsx  |       0 |        0 |       0 |       0 |                   
  ...oardModal.tsx |       0 |        0 |       0 |       0 |                   
  ...esContext.tsx |       0 |      100 |     100 |       0 | 3-53              
  ...eDropdown.tsx |       0 |      100 |     100 |       0 | 3-88              
  ...ingsModal.tsx |       0 |        0 |       0 |       0 |                   
  ...tProvider.tsx |       0 |      100 |     100 |       0 | 3-118             
  ...Formatter.tsx |       0 |      100 |     100 |       0 | 3-45              
 ...ponents/layout |       0 |      100 |     100 |       0 |                   
  GlobalLayout.tsx |       0 |      100 |     100 |       0 | 3-311             
  PageContent.tsx  |       0 |      100 |     100 |       0 | 10-30             
 ...onents/markets |       0 |      100 |     100 |       0 |                   
  ...dSkeleton.tsx |       0 |      100 |     100 |       0 | 7-49              
  EmptyState.tsx   |       0 |      100 |     100 |       0 | 7-45              
  ExportButton.tsx |       0 |      100 |     100 |       0 | 7-68              
  ...Shortcuts.tsx |       0 |      100 |     100 |       0 | 7-116             
  MarketStats.tsx  |       0 |      100 |     100 |       0 | 15-181            
  QuickStats.tsx   |       0 |      100 |     100 |       0 | 7-98              
 ...ents/portfolio |       0 |      100 |     100 |       0 |                   
  ...ssetModal.tsx |       0 |      100 |     100 |       0 | 3-348             
 ...end/src/config |       0 |        0 |       0 |       0 |                   
  brand.ts         |       0 |        0 |       0 |       0 |                   
 frontend/src/data |       0 |      100 |     100 |       0 |                   
  ...arket-data.ts |       0 |      100 |     100 |       0 | 17-11989          
 ...tend/src/hooks |   21.85 |    93.65 |     100 |   21.85 |                   
  ...kendPrices.ts |       0 |      100 |     100 |       0 | 14-389            
  useMarketData.ts |   97.83 |    93.33 |     100 |   97.83 | 225,227,255,266   
  ...ifications.ts |       0 |      100 |     100 |       0 | 6-470             
  ...fiedAssets.ts |       0 |      100 |     100 |       0 | 8-193             
 ...nd/src/lib/api |   62.24 |    87.09 |   84.61 |   62.24 |                   
  api.ts           |       0 |        0 |       0 |       0 | 1                 
  apiClient.ts     |     100 |      100 |     100 |     100 |                   
  apiFetch.ts      |     100 |    76.47 |     100 |     100 | 7,13,41           
  auth-guard.ts    |       0 |        0 |       0 |       0 | 1-13              
  ...rotection.tsx |       0 |      100 |     100 |       0 | 3-76              
  auth.ts          |     100 |      100 |     100 |     100 |                   
  chat.ts          |     100 |      100 |     100 |     100 |                   
  collab.ts        |       0 |        0 |       0 |       0 | 1-46              
  index.ts         |       0 |      100 |     100 |       0 | 2-11              
  price-feed.ts    |       0 |        0 |       0 |       0 | 1-28              
  queryClient.ts   |       0 |      100 |     100 |       0 | 8-62              
 ...src/lib/charts |   56.76 |    82.55 |   78.26 |   56.76 |                   
  chartBus.ts      |   61.53 |      100 |   33.33 |   61.53 | 18-19,21-23       
  chartMap.ts      |       0 |      100 |     100 |       0 | 10-57             
  chartUtils.ts    |     100 |       75 |     100 |     100 | 12,15,20          
  index.ts         |       0 |      100 |     100 |       0 | 2-7               
  indicators.ts    |   71.94 |    74.28 |      75 |   71.94 | 55-76,86-106      
  lw-extras.ts     |       0 |        0 |       0 |       0 | 1-56              
  lw-mapping.ts    |     100 |    94.28 |     100 |     100 | 25-26             
 .../lib/constants |       0 |      100 |     100 |       0 |                   
  flags.ts         |       0 |      100 |     100 |       0 | 3-16              
 ...d/src/lib/data |   85.14 |    90.05 |   89.74 |   85.14 |                   
  adapter.ts       |   89.71 |    84.37 |   81.81 |   89.71 | ...63-164,167-171 
  dashboardData.ts |     100 |    96.15 |     100 |     100 | 152,231           
  persistence.ts   |     100 |      100 |     100 |     100 |                   
  ...lioStorage.ts |       0 |      100 |     100 |       0 | 16-80             
 .../lib/importers |       0 |      100 |     100 |       0 |                   
  tradingview.ts   |       0 |      100 |     100 |       0 | 25-128            
 ...rc/lib/plugins |       0 |      100 |     100 |       0 |                   
  index.ts         |       0 |      100 |     100 |       0 | 2-4               
  pluginAPI.ts     |       0 |      100 |     100 |       0 | 2-33              
  pluginSDK.ts     |       0 |      100 |     100 |       0 | 69-301            
  plugins.ts       |       0 |      100 |     100 |       0 | 18-40             
 ...src/lib/stores |    1.07 |       60 |    43.9 |    1.07 |                   
  alertsStore.tsx  |       0 |        0 |       0 |       0 | 1-963             
  ...sterStore.tsx |       0 |        0 |       0 |       0 | 1-946             
  ...SyncStore.tsx |       0 |        0 |       0 |       0 | 1-1781            
  ...ionsStore.tsx |       0 |        0 |       0 |       0 | 1-548             
  drawStore.tsx    |       0 |      100 |     100 |       0 | 2-88              
  drawingStore.tsx |       0 |      100 |     100 |       0 | 2-423             
  ...mentStore.tsx |       0 |        0 |       0 |       0 | 1-1886            
  index.ts         |       0 |      100 |     100 |       0 | 3-21              
  ...atorStore.tsx |       0 |      100 |     100 |       0 | 19-89             
  ...tingStore.tsx |       0 |        0 |       0 |       0 | 1-1885            
  ...DataStore.tsx |       0 |      100 |     100 |       0 | 2-237             
  ...A11yStore.tsx |       0 |        0 |       0 |       0 | 1-1550            
  ...ringStore.tsx |       0 |        0 |       0 |       0 | 1-1779            
  ...hartStore.tsx |    52.5 |    77.14 |   56.25 |    52.5 | ...25-351,355-381 
  ...lityStore.tsx |       0 |        0 |       0 |       0 | 1-1752            
  paneStore.tsx    |       0 |      100 |     100 |       0 | 2-153             
  ...dingStore.tsx |       0 |        0 |       0 |       0 | 1-1284            
  ...anceStore.tsx |       0 |        0 |       0 |       0 | 1-1741            
  ...ingsStore.tsx |       0 |      100 |     100 |       0 | 9-50              
  ...mentStore.tsx |       0 |        0 |       0 |       0 | 1-1317            
  ...backStore.tsx |       0 |        0 |       0 |       0 | 1-1425            
  socialStore.tsx  |       0 |        0 |       0 |       0 | 1-1312            
  symbolStore.tsx  |       0 |      100 |     100 |       0 | 3-16              
  ...atesStore.tsx |       0 |        0 |       0 |       0 | 1-804             
  ...rameStore.tsx |       0 |      100 |     100 |       0 | 4-17              
  ...listStore.tsx |       0 |        0 |       0 |       0 | 1-506             
 .../src/lib/types |       0 |        0 |       0 |       0 |                   
  index.ts         |       0 |        0 |       0 |       0 |                   
 .../src/lib/utils |   31.25 |    82.08 |   74.64 |   31.25 |                   
  alerts.ts        |     100 |      100 |     100 |     100 |                   
  alignment.ts     |       0 |      100 |     100 |       0 | 6-60              
  drawings.ts      |       0 |        0 |       0 |       0 | 1-156             
  exporters.ts     |       0 |        0 |       0 |       0 | 1-41              
  featureFlags.ts  |     100 |      100 |     100 |     100 |                   
  geom.ts          |       0 |      100 |     100 |       0 | 4-39              
  globalHotkeys.ts |       0 |        0 |       0 |       0 | 1-43              
  hotkeys.ts       |   47.61 |      100 |      50 |   47.61 | 8-18              
  index.ts         |       0 |      100 |     100 |       0 | 2-31              
  io.ts            |       0 |        0 |       0 |       0 | 1-45              
  keys.ts          |       0 |        0 |       0 |       0 | 1-10              
  labels.ts        |       0 |      100 |     100 |       0 | 2-95              
  lod.ts           |    8.43 |      100 |       0 |    8.43 | ...78,82-89,93-99 
  measure.ts       |     100 |      100 |     100 |     100 |                   
  migrations.ts    |       0 |      100 |     100 |       0 | 6-218             
  notify.ts        |     100 |      100 |     100 |     100 |                   
  pdf.ts           |     100 |       80 |     100 |     100 | 32                
  perf.ts          |     100 |      100 |     100 |     100 |                   
  persist.ts       |     100 |      100 |     100 |     100 |                   
  portfolio.ts     |     100 |      100 |     100 |     100 |                   
  report.ts        |       0 |        0 |       0 |       0 | 1-119             
  share.ts         |       0 |        0 |       0 |       0 | 1-36              
  share2.ts        |       0 |        0 |       0 |       0 | 1-39              
  social.ts        |       0 |        0 |       0 |       0 | 1-77              
  storage.ts       |     100 |      100 |     100 |     100 |                   
  styles.ts        |       0 |      100 |     100 |       0 | 12-47             
  svg.ts           |       0 |      100 |     100 |       0 | 28-177            
  theme.ts         |       0 |        0 |       0 |       0 |                   
  timeframes.ts    |   95.65 |       90 |     100 |   95.65 | 21                
  toast.tsx        |       0 |        0 |       0 |       0 | 1-34              
  webVitals.ts     |    89.2 |    59.57 |     100 |    89.2 | ...02-203,205-206 
 ...d/src/services |       0 |      100 |     100 |       0 |                   
  ...iceService.ts |       0 |      100 |     100 |       0 | 12-507            
  marketData.ts    |       0 |      100 |     100 |       0 | 58-699            
 ...tend/src/state |       0 |      100 |     100 |       0 |                   
  store.ts         |       0 |      100 |     100 |       0 | 3-609             
 frontend/src/test |       0 |      100 |     100 |       0 |                   
  utils.tsx        |       0 |      100 |     100 |       0 | 7-50              
 ...tend/src/types |       0 |        0 |       0 |       0 |                   
  alerts.ts        |       0 |        0 |       0 |       0 |                   
  assets.ts        |       0 |        0 |       0 |       0 |                   
  chart.ts         |       0 |        0 |       0 |       0 |                   
  drawing.ts       |       0 |        0 |       0 |       0 |                   
  drawings.ts      |       0 |        0 |       0 |       0 |                   
  google-auth.ts   |       0 |        0 |       0 |       0 |                   
  ...ght-charts.ts |       0 |        0 |       0 |       0 |                   
  user.ts          |       0 |        0 |       0 |       0 |                   
  window.ts        |       0 |        0 |       0 |       0 |                   
 ...tend/src/utils |       0 |      100 |     100 |       0 |                   
  assetIcons.tsx   |       0 |      100 |     100 |       0 | 10-272            
  logger.ts        |       0 |      100 |     100 |       0 | 6-116             
 frontend/types    |       0 |      100 |     100 |       0 |                   
  api.ts           |       0 |      100 |     100 |       0 | 126-133           
-------------------|---------|----------|---------|---------|-------------------
